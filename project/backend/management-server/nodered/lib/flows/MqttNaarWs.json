[{"id":"2e70c511.52fb1a","type":"websocket out","z":"db4b55a7.f58538","name":"","server":"84eec9d5.05bc48","client":"","x":1030,"y":520,"wires":[]},{"id":"8c2f5b01.76b578","type":"mqtt in","z":"db4b55a7.f58538","name":"","topic":"Battery","qos":"1","datatype":"auto","broker":"22deea28.7eacb6","x":130,"y":600,"wires":[["3ffdb0f2.3bb19"]]},{"id":"5e0cbe77.7a1d1","type":"mqtt in","z":"db4b55a7.f58538","name":"","topic":"Position","qos":"2","datatype":"auto","broker":"22deea28.7eacb6","x":130,"y":540,"wires":[["3ffdb0f2.3bb19"]]},{"id":"874bba1d.a6c868","type":"mqtt in","z":"db4b55a7.f58538","name":"","topic":"Acceleration","qos":"1","datatype":"auto","broker":"22deea28.7eacb6","x":150,"y":360,"wires":[["3ffdb0f2.3bb19"]]},{"id":"75e822f5.1d75ac","type":"mqtt in","z":"db4b55a7.f58538","name":"","topic":"Speed","qos":"1","datatype":"auto","broker":"22deea28.7eacb6","x":130,"y":420,"wires":[["3ffdb0f2.3bb19"]]},{"id":"ad1b6866.d59288","type":"mqtt in","z":"db4b55a7.f58538","name":"","topic":"Orientation","qos":"1","datatype":"auto","broker":"22deea28.7eacb6","x":140,"y":480,"wires":[["3ffdb0f2.3bb19"]]},{"id":"75298d16.946014","type":"inject","z":"db4b55a7.f58538","name":"","topic":"","payload":"50","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":100,"wires":[["e80b381b.fc6988"]]},{"id":"e80b381b.fc6988","type":"mqtt out","z":"db4b55a7.f58538","name":"","topic":"Speed","qos":"","retain":"","broker":"22deea28.7eacb6","x":930,"y":100,"wires":[]},{"id":"a005be16.1f36d","type":"function","z":"db4b55a7.f58538","name":"convertPayload","func":"let geoJSON = `{\n            \"type\": \"FeatureCollection\",\n            \"features\": [{\n                \"type\": \"Feature\",\n                \"properties\": {\n                    \"speed\": ${flow.get(\"Speed\")},\n                    \"battery\": ${flow.get(\"Battery\")},\n                    \"acceleration\": ${flow.get(\"Acceleration\")},\n                    \"orientation\": ${flow.get(\"Orientation\")},\n                    \"position\" : ${flow.get(\"Position\")}\n                },\n                \"geometry\": {\n                    \"type\": \"Point\", // LineString gebruiken voor paths\n                    \"coordinates\": [0, 0, 0]\n                }\n            }]\n        }`;\nmsg.payload = geoJSON;\nreturn msg;\n","outputs":1,"noerr":0,"x":560,"y":460,"wires":[["95937eb9.9873c","2e70c511.52fb1a"]]},{"id":"95937eb9.9873c","type":"debug","z":"db4b55a7.f58538","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1080,"y":400,"wires":[]},{"id":"3ffdb0f2.3bb19","type":"function","z":"db4b55a7.f58538","name":"store","func":"flow.set(msg.topic, msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":460,"wires":[["a005be16.1f36d","92af0f85.df39"]]},{"id":"92af0f85.df39","type":"debug","z":"db4b55a7.f58538","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":560,"y":300,"wires":[]},{"id":"8b6bc625.dbcd38","type":"inject","z":"db4b55a7.f58538","name":"","topic":"Battery","payload":"98","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":260,"y":160,"wires":[["e75b0ef8.20c16"]]},{"id":"e75b0ef8.20c16","type":"mqtt out","z":"db4b55a7.f58538","name":"","topic":"Battery","qos":"","retain":"","broker":"22deea28.7eacb6","x":940,"y":160,"wires":[]},{"id":"84eec9d5.05bc48","type":"websocket-listener","z":"","path":"/ws/data","wholemsg":"false"},{"id":"22deea28.7eacb6","type":"mqtt-broker","z":"","name":"mosquitto","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""}]